---
// page metadata
// server side logic... merp!
import '../styles/style.css';
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>ARCHIVE</title>
		
		<!-- google fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
	</head>
	<body class="bg-bone text-ink min-h-screen flex flex-col">

		<!-- header -->
		<header class="flex-1 bg-bone min-h-[40vh]"></header>
		<main class="bg-ink py-8 md:py-12 lg:py-16 px-6 md:px-12">
			<div class="flex items-center justify-between gap-8">
				<h1 class="font-brigends text-bone text-[6rem] md:text-[9rem] lg:text-[10rem] xl:text-[12rem] leading-none text-left tracking-tight">
					ARCHIVE
				</h1>
				<div class="font-mono text-bone text-xs md:text-sm lg:text-base max-w-md leading-relaxed text-justify">
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
				</div>
			</div>
		</main>
		
		<!-- waitlist form -->
		<footer class="bg-bone text-ink py-8 md:py-10 w-full">
			<div class="flex flex-col md:flex-row items-center justify-between gap-6 w-full px-6 md:px-12">
				<!-- Label -->
				<div class="font-mono text-sm md:text-base tracking-wider md:text-left">
					JOIN THE ARCHIVE:
				</div>
				
				<!-- waitlist form -->
				<form 
					id="waitlist-form" 
					class="flex items-center gap-4 flex-1 max-w-md justify-center"
					onsubmit="handleSubmit(event)"
				>
					<input
						type="email"
						name="email"
						placeholder="you@example.com"
						required
						class="font-mono bg-transparent border-0 border-b-2 border-ink/30 text-ink placeholder-ink/50 focus:outline-none focus:border-ink transition-colors flex-1 py-2 text-sm md:text-base"
					/>
					<button
						type="submit"
						class="bg-ink text-bone font-mono px-8 py-2 text-sm md:text-base font-semibold tracking-wider hover:bg-ink/90 transition-colors uppercase"
					>
						SUBMIT
					</button>
				</form>
				
				<!-- email -->
				<div class="font-mono text-xs md:text-sm tracking-wider text-ink/70 hidden md:block md:text-right">
					INFO@ARCHIVE.YOU
				</div>
			</div>
		</footer>
		
		<script>
			// airtable configuration
			const AIRTABLE_CONFIG = {
				BASE_ID: 'YOUR_BASE_ID',
				API_KEY: 'YOUR_API_KEY',
				TABLE_NAME: 'Waitlist',
			};
			
			async function handleSubmit(event: Event) {
				event.preventDefault();
				
				const form = event.target as HTMLFormElement;
				if (!form) return;
				
				const formData = new FormData(form);
				const email = formData.get('email');
	
				console.log('SUBMITTED:', email);
				// console.log('Airtable Config:', AIRTABLE_CONFIG);
				
				// TODO: integrate with airtable API
				// const response = await fetch(
				//   `https://api.airtable.com/v0/${AIRTABLE_CONFIG.BASE_ID}/${AIRTABLE_CONFIG.TABLE_NAME}`,
				//   {
				//     method: 'POST',
				//     headers: {
				//       'Authorization': `Bearer ${AIRTABLE_CONFIG.API_KEY}`,
				//       'Content-Type': 'application/json',
				//     },
				//     body: JSON.stringify({
				//       fields: {
				//         Email: email,
				//         Created: new Date().toISOString(),
				//       },
				//     }),
				//   }
				// );
				
				// reset form
				form.reset();
				
				// show success message (optional)
				alert('ARCHIVE WAITLIST SUBMITTED');
			}
		</script>
	</body>
</html>
